# Document Generation Service - Варианты использования

## Обзор

Диаграмма вариантов использования описывает взаимодействие актеров с системой генерации документов.

## Диаграмма вариантов использования

![Use Case Diagram](images/use_case.png)

## Содержание

1. [Актеры](#actors)
2. [Варианты использования](#use-cases)  
   2.1 [Гость](#guest)  
   2.2 [Пользователь](#user)
3. [Спецификации вариантов использования](#use-case-specifications)  
   3.1 [Генерация документа](#generate-document)  
   3.2 [Управление шаблонами](#manage-templates)  
   3.3 [Зарегистрироваться](#register)  
   3.4 [Авторизоваться](#login)  
   3.5 [Управление профилем](#manage-profile)  
   3.6 [Управление проектами](#manage-projects)  
   3.7 [Управление полями шаблонов](#manage-template-fields)  
   3.8 [Просмотр документов](#view-documents)  
   3.9 [Скачивание документа](#download-document)  
   3.10 [Управление сессиями генерации](#manage-generation-sessions)  

<a name="actors"/>

## 1. Актеры

| Актер | Описание |
|-------|-------------|
| Гость | Неавторизованный пользователь с ограниченным доступом |
| Пользователь | Зарегистрированный пользователь системы |

<a name="use-cases"/>

## 2. Варианты использования

<a name="guest"/>

### 2.1. Гость

| Вариант использования | Описание |
|-----------------------|-------------|
| Зарегистрироваться | Создание новой учетной записи в системе |
| Авторизоваться | Вход в систему с существующими учетными данными |

<a name="user"/>

### 2.2. Пользователь

| Вариант использования | Описание |
|-----------------------|-------------|
| Управление профилем | Редактирование информации учетной записи |
| Управление проектами | Создание и управление проектами документов |
| Управление шаблонами | Работа с шаблонами документов |
| Управление полями шаблонов | Настройка полей шаблонов |
| Генерация документа | Создание документа на основе шаблона и данных |
| Просмотр документов | Просмотр списка сгенерированных документов |
| Скачивание документа | Загрузка сгенерированного документа |
| Управление сессиями генерации | Просмотр истории и сессий генерации |

<a name="use-case-specifications"/>

## 3. Спецификации вариантов использования

<a name="generate-document"/>

### 3.1. Генерация документа

**Актеры:** Пользователь

**Описание:** Позволяет пользователю генерировать документ на основе выбранного шаблона и предоставленных данных

**Предусловия:**
- Пользователь авторизован в системе
- В системе существует хотя бы один шаблон документа
- Пользователь имеет доступ к выбранному шаблону

**Основной поток:**
1. Пользователь выбирает шаблон документа из списка доступных
2. Система отображает форму с полями шаблона и требованиями к данным
3. Пользователь заполняет необходимые данные в соответствующих полях
4. Система проверяет корректность введенных данных
5. Пользователь выбирает формат выходного документа (PDF/DOCX)
6. Пользователь подтверждает генерацию документа
7. Система обрабатывает шаблон с предоставленными данными
8. Система генерирует документ в выбранном формате
9. Система сохраняет сгенерированный документ
10. Система уведомляет пользователя об успешной генерации

**Альтернативные потоки:**
- A1: Невалидные данные - Система отображает ошибки проверки и возвращается к шагу 3
- A2: Ошибка генерации - Система отображает сообщение об ошибке и возвращается к шагу 3
- A3: Отмена генерации - Пользователь отменяет операцию на любом этапе

<a name="manage-templates"/>

### 3.2. Управление шаблонами

**Актеры:** Пользователь

**Описание:** Позволяет пользователю создавать, редактировать и управлять шаблонами документов

**Предусловия:**
- Пользователь авторизован в системе
- Пользователь имеет хотя бы один проект

**Основной поток:**
1. Пользователь выбирает проект для работы с шаблонами
2. Система отображает список шаблонов в проекте
3. Пользователь выбирает создание нового шаблона
4. Система отображает форму создания шаблона
5. Пользователь вводит название и описание шаблона
6. Пользователь загружает файл шаблона или создает содержимое шаблона через редактор
7. Пользователь настраивает поля и свойства шаблона
8. Система сохраняет шаблон
9. Система подтверждает успешное создание шаблона

**Альтернативные потоки:**
- A1: Редактирование шаблона - Пользователь выбирает существующий шаблон для редактирования на шаге 3
- A2: Удаление шаблона - Пользователь удаляет шаблон с подтверждением на шаге 3
- A3: Копирование шаблона - Пользователь создает копию существующего шаблона

<a name="register"/>

### 3.3. Зарегистрироваться

**Актеры:** Гость

**Описание:** Позволяет гостю создать новую учетную запись пользователя

**Предусловия:**
- Гость не авторизован в системе

**Основной поток:**
1. Гость переходит на страницу регистрации
2. Система отображает форму регистрации
3. Гость заполняет необходимую информацию (email, пароль, имя пользователя)
4. Система проверяет корректность предоставленных данных
5. Система проверяет уникальность email и имени пользователя
6. Система создает новую учетную запись пользователя
7. Система отправляет email подтверждения
8. Система перенаправляет на страницу авторизации
9. Система отображает сообщение об успешной регистрации

**Альтернативные потоки:**
- A1: Невалидные данные - Система отображает ошибки и возвращается к шагу 3
- A2: Email уже существует - Система предлагает восстановление пароля
- A3: Имя пользователя занято - Система предлагает выбрать другое имя

<a name="login"/>

### 3.4. Авторизоваться

**Актеры:** Гость

**Описание:** Позволяет пользователю войти в систему с существующими учетными данными

**Предусловия:**
- Пользователь имеет зарегистрированную учетную запись

**Основной поток:**
1. Гость переходит на страницу авторизации
2. Система отображает форму входа
3. Гость вводит email и пароль
4. Система проверяет корректность учетных данных
5. Система создает сессию пользователя
6. Система перенаправляет на главную страницу
7. Система отображает интерфейс для авторизованного пользователя

**Альтернативные потоки:**
- A1: Неверные учетные данные - Система отображает ошибку и возвращается к шагу 3
- A2: Восстановление пароля - Пользователь запрашивает восстановление пароля
- A3: Запомнить меня - Система сохраняет сессию на длительный период

<a name="manage-profile"/>

### 3.5. Управление профилем

**Актеры:** Пользователь

**Описание:** Позволяет пользователю редактировать информацию своей учетной записи

**Предусловия:**
- Пользователь авторизован в системе

**Основной поток:**
1. Пользователь переходит в раздел управления профилем
2. Система отображает текущие данные профиля
3. Пользователь редактирует необходимые поля (имя, email, настройки)
4. Система проверяет корректность изменений
5. Пользователь подтверждает сохранение изменений
6. Система обновляет данные профиля
7. Система отображает сообщение об успешном обновлении

**Альтернативные потоки:**
- A1: Смена пароля - Пользователь изменяет пароль учетной записи
- A2: Смена email - Пользователь изменяет email с обязательной подтверждающей верификацией
- A3: Отмена изменений - Пользователь отменяет редактирование без сохранения

<a name="manage-projects"/>

### 3.6. Управление проектами

**Актеры:** Пользователь

**Описание:** Позволяет пользователю создавать и управлять проектами документов

**Предусловия:**
- Пользователь авторизован в системе

**Основной поток:**
1. Пользователь переходит в раздел управления проектами
2. Система отображает список существующих проектов
3. Пользователь выбирает создание нового проекта
4. Система отображает форму создания проекта
5. Пользователь вводит название и описание проекта
6. Пользователь настраивает параметры проекта
7. Система сохраняет проект
8. Система отображает сообщение об успешном создании проекта

**Альтернативные потоки:**
- A1: Редактирование проекта - Пользователь редактирует существующий проект
- A2: Удаление проекта - Пользователь удаляет проект с подтверждением
- A3: Архивация проекта - Пользователь перемещает проект в архив

<a name="manage-template-fields"/>

### 3.7. Управление полями шаблонов

**Актеры:** Пользователь

**Описание:** Позволяет пользователю настраивать поля шаблонов документов

**Предусловия:**
- Пользователь авторизован в системе
- Существует хотя бы один шаблон для редактирования

**Основной поток:**
1. Пользователь выбирает шаблон для редактирования полей
2. Система отображает текущие поля шаблона
3. Пользователь добавляет новое поле
4. Пользователь настраивает параметры поля (название, тип, обязательность)
5. Система проверяет корректность настроек поля
6. Пользователь сохраняет изменения
7. Система обновляет структуру шаблона
8. Система подтверждает успешное сохранение

**Альтернативные потоки:**
- A1: Редактирование поля - Пользователь изменяет параметры существующего поля
- A2: Удаление поля - Пользователь удаляет поле из шаблона
- A3: Изменение порядка полей - Пользователь изменяет порядок отображения полей

<a name="view-documents"/>

### 3.8. Просмотр документов

**Актеры:** Пользователь

**Описание:** Позволяет пользователю просматривать список сгенерированных документов

**Предусловия:**
- Пользователь авторизован в системе

**Основной поток:**
1. Пользователь переходит в раздел документов
2. Система отображает список сгенерированных документов
3. Пользователь применяет фильтры (по дате, проекту, статусу)
4. Система обновляет список согласно фильтрам
5. Пользователь просматривает детальную информацию о документе
6. Система отображает метаданные документа и историю генерации

**Альтернативные потоки:**
- A1: Поиск документов - Пользователь использует поиск для нахождения конкретных документов
- A2: Сортировка - Пользователь сортирует документы по различным параметрам
- A3: Предпросмотр - Пользователь просматривает содержимое документа без скачивания

<a name="download-document"/>

### 3.9. Скачивание документа

**Актеры:** Пользователь

**Описание:** Позволяет пользователю скачать сгенерированный документ

**Предусловия:**
- Пользователь авторизован в системе
- Документ существует и доступен для скачивания

**Основной поток:**
1. Пользователь выбирает документ из списка
2. Пользователь нажимает кнопку скачивания
3. Система проверяет доступность документа
4. Система предоставляет файл для скачивания
5. Браузер пользователя начинает загрузку файла

**Альтернативные потоки:**
- A1: Документ недоступен - Система уведомляет о временной недоступности документа
- A2: Массовое скачивание - Пользователь скачивает несколько документов в архиве
- A3: Прямая ссылка - Система предоставляет прямую ссылку для скачивания

<a name="manage-generation-sessions"/>

### 3.10. Управление сессиями генерации

**Актеры:** Пользователь

**Описание:** Позволяет пользователю просматривать историю и управлять сессиями генерации документов

**Предусловия:**
- Пользователь авторизован в системе
- Существует история генерации документов

**Основной поток:**
1. Пользователь переходит в раздел истории генерации
2. Система отображает список сессий генерации
3. Пользователь просматривает детальную информацию о сессии
4. Система отображает статус, параметры и результат сессии
5. Пользователь анализирует статистику генерации

**Альтернативные потоки:**
- A1: Фильтрация сессий - Пользователь фильтрует сессии по статусу, дате или проекту
- A2: Повторение сессии - Пользователь запускает повторную генерацию на основе существующей сессии
- A3: Экспорт истории - Пользователь экспортирует историю генерации в файл